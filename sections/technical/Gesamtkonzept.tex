\section{Grundkonzept}
\label{chap:grundkonzept}
\begin{figure}[h]
	\centering
	\includegraphics[width=0.9\textwidth]{graphics/Grundkonzept.PNG}
	\caption{Grundkonzept}
	\label{fig:grundkonzept}
\end{figure}

\paragraph{Übersicht:}
Als Zentralrecheneinheit wird eine \textit{Micro-Controller-Unit (MCU)} verwendet. Dieser ist dafür verantwortlich, dass die Daten richtig verarbeitet und an das dementsprechende Modul weitergeleitet werden. Die Messdaten werden in digitaler Form vom Modul \textit{Sensoren} an die \textit{MCU} übertragen. Dieser fügt mit dem \textit{Real-Time-Clock (RTC)} einen Timestamp hinzu, wobei anschließend die Daten in der \textit{Datenspeicherung} nichtflüchtig gespeichert werden. Über das \textit{Kommunikationsmodul} können dann die Daten von Nutznießern abgefragt werden.

\vspace{0.5cm}
\hrule
\vspace{0.25cm}

Das gesamte Grundkonzept ist, wie in der Abbildung \ref{fig:grundkonzept} graphisch Dargestellt, modular aufgebaut. Auf alle einzelnen Module wird folgend spezifischer eingegangen und die Konzeptvariationen vorgestellt. Dafür sind zusätzlich noch Vor- \& Nachteile für die Varianten aufgelistet.\\
\newpage

\subsection{Micro Controller Unit (MCU)}
\paragraph{Variante 1:}
\begin{wrapfigure}{r}{0.5\textwidth}
  \vspace{-10pt}
  \begin{center}
    \includegraphics[width=0.38\textwidth]{graphics/arduino_mega.png}
  \end{center}
  \vspace{-10pt}
  \caption{Arduino Mega \cite{Elektronik}}
  \vspace{-10pt}
  \label{fig:arduino_mega}
\end{wrapfigure}
Für den \textit{MCU} wird ein ATmega2560 8-bit Microcontroller auf einem Arduino Mega Board implementiert verwendet. Dieser hat 256 KB Flash Memory\footnote{abzüglich 8 KB des Bootloaders} und 8 KB SRAM, was genügend Kapazität für die Implementation der Ablaufsteuerung der Wetterstation bietet. Er oszilliert mit 16 MHz.\\

\paragraph{Variante 2:}

Es wird ein separates Printed Circuit Board (PCB) für die MCU designed. Dafür wird der gleiche Microcontroller wie bei Variante 1 verwendet.\\

\begin{table}[h]
  \centering
  \label{tab:mcu}
  \small
  \caption{Vor- \& Nachteile}
    \begin{tabular}{c|l|l}
          & \textbf{Vorteile} & \textbf{Nachteile} \\
    \toprule
    \multirow{4}[2]{*}{\textbf{Variante 1}} & • in-system Programmierung &  \\
          & \hspace{0.3cm} über USB Typ B möglich &  \\
          & • USB-Schnittstelle für eine &  \\
          &   \hspace{0.3cm} Datenkommunikation mit PC &  \\
    \hline
    \multirow{4}[1]{*}{\textbf{Variante 2}} &       & • zusätzlicher ICSP-Header für \\
          &       & \hspace{0.3cm} eine in-system Programmierung mit \\
          &       & \hspace{0.3cm} einem zusätzlichen Gerät (z.B. AVR Dragon) \\
          &       & • benötigt UART-to-USB Chip \\
    \end{tabular}%
  \label{tab:mcu}%
\end{table}%

\newpage
\subsection{Sensoren}
\begin{figure}[h]
\centering
\includegraphics[scale=0.8]{graphics/Sensoren.PNG}
\caption{Sensoren}
\label{fig:sensoren}
\end{figure}
In dem Block \textit{Sensoren} werden alle Messeinheiten untergebracht. Die Idee dieses Blockes ist es, dass er adaptiv ist und somit leicht erweitert werden kann (Abbildung \ref{fig:sensoren}). Jeder Sensor ist nach dem Prinzip, wie in der Abbildung \ref{fig:sensoraufbau} gezeigt, aufgebaut. Es wird dann von der Seite des \textit{MCU}'s mit dem Datenlogger kommuniziert.\\

\begin{figure}[h]
\centering
\includegraphics[scale=0.7]{graphics/Sensoraufbau.PNG}
\caption{Sensoraufbau}
\label{fig:sensoraufbau}
\end{figure}

\paragraph{Variante 1:}

Es werden nur die Messfühler gekauft. \\

\paragraph{Variante 2:}

Die Sensoren werden als intelligente Wettersensorik gekauft. Diese sind, je nach Typ, in verschiedenen Variationen mit unterschiedlichen Messparametern und -technologien ausgestattet. Zudem kompatibel für den Solarbetrieb in allen Klimazonen und Wartungsfrei\footnote{abhängig von den einzelnen Sensoren}.\\

\newpage
\paragraph{Variante 3}

Eine Mischung aus der Variante 2 \& 3.\\

\begin{table}[h]
  \centering
  \label{tab:mcu}
  \small
  \caption{Vor- \& Nachteile}
    \begin{tabular}{c|l|l}
          & \textbf{Vorteile} & \textbf{Nachteile} \\
    \toprule
    \multirow{4}[2]{*}{\textbf{Variante 1}} & • günstig & • sehr arbeitsaufwändig \\
          &  & • eingeschränkt, da einzelne Messfühler \\
          &  & \hspace{0.3cm} teils nur als komplette Sensorik \\
          &  & \hspace{0.3cm} erhältlich sind \\
    \hline
    \multirow{2}[1]{*}{\textbf{Variante 2}} & • wartungsfrei & • teuer \\
          & • kompatibel für Solarbetrieb &  \\
    \hline
    \multirow{4}[1]{*}{\textbf{Variante 3}} &  &  \\
          &       &  \\
          &       &  \\
          &       &  \\
    \end{tabular}%
  \label{tab:sensoren}
\end{table}

%\input{sections/technical/subsections/einzelne_Sensoren}

\subsection{Kommunikationsmodul}
\begin{figure}[h]
\centering
\includegraphics[scale=0.7]{graphics/Kommunikationsmodul.PNG}
\caption{Kommunikationsmodul}
\end{figure}
\newpage
\subsection{Datenspeicherung}
\paragraph{Variante 1:}

Die Datenspeicherung erfolgt auf einer $\mu$SD-Karte. Diese kann in ein Breakoutboard eingeschoben werden.\\

\paragraph{Variante 2:}

Es werden zur Datenspeicherung EEPROM's benutzt.\\

\begin{table}[h]
  \centering
  \label{tab:datenspeicherung}
  \small
  \caption{Vor- \& Nachteile}
    \begin{tabular}{c|l|l}
          & \textbf{Vorteile} & \textbf{Nachteile} \\
    \toprule
    \multirow{4}[2]{*}{\textbf{Variante 1}} & • internes level-shifting & • es wird ein zusätzliches \\
          & • grosser Speicherplatz & \hspace{0.3cm}Breakoutboard verwendet \\
          & • Daten können notfalls auch &  \\
          &   \hspace{0.3cm} direkt von der $\mu$SD-Karte &  \\
          &   \hspace{0.3cm} entnommen werden &  \\
    \hline
    \multirow{2}[1]{*}{\textbf{Variante 2}} &       & • kleiner Speicherplatz \\
          &       & • benötigt level-shifting \\
    \end{tabular}%
  \label{tab:addlabel}%
\end{table}%


\subsection{RTC}

\subsection{Speisung}
\begin{figure}[h]
\centering
\includegraphics[scale=0.6]{graphics/Energieversorgung.PNG}
\caption{Energieversorgung}
\end{figure}
